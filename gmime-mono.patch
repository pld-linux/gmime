--- Makefile.am.orig	2004-12-14 11:18:56.191162672 +0100
+++ Makefile.am	2004-12-14 11:18:22.000000000 +0100
@@ -1,6 +1,12 @@
 ## Process this file with automake to produce Makefile.in
 
-SUBDIRS = util gmime src tests docs examples .
+SUBDIRS = util gmime src 
+
+if ENABLE_MONO
+SUBDIRS += mono
+endif
+
+SUBDIRS += tests docs examples .
 
 bin_SCRIPTS = gmime-config
 
diff -u -r1.84 -r1.88
--- configure.in	22 Oct 2004 20:40:06 -0000	1.84
+++ configure.in	1 Dec 2004 19:53:23 -0000	1.88
@@ -192,6 +192,55 @@
 LIBNSL=""
 AC_CHECK_LIB(nsl, getaddrinfo, LIBNSL="-lnsl")
 
+dnl ****************************
+dnl *** Enable Mono bindings ***
+dnl ****************************
+AC_ARG_ENABLE(mono, [  --enable-mono       Enable Mono bindings [default=auto]], enable_mono="$enableval", enable_mono="auto")
+if test ! "x$enable_mono" = "xno"; then
+	AC_PATH_PROG(CSC, mcs, no)
+else
+	CSC="no"
+fi
+
+if test "x$CSC" = "xno"; then
+	dnl error out if the user has explicitly requested mono bindings
+	if test "x$enable_mono" = "xyes"; then
+		AC_MSG_ERROR([Could not find mcs])
+	fi
+
+	enable_mono="no"
+	AM_CONDITIONAL(ENABLE_MONO, false)
+else
+	enable_mono="yes"
+	AM_CONDITIONAL(ENABLE_MONO, true)
+fi
+
+if test "x$enable_mono" = "xyes"; then
+	AC_PATH_PROG(GACUTIL, gacutil, no)
+	if test "x$GACUTIL" = "xno"; then
+		AC_MSG_ERROR([Your mono installation doesn't expose gacutil])
+	fi
+	
+	AC_SUBST(CSC)
+	AC_SUBST(GACUTIL)
+	
+	PKG_CHECK_MODULES(GTK_SHARP, gtk-sharp >= 0.91.1)
+	AC_SUBST(GTK_SHARP_LIBS)
+	
+	AC_PATH_PROG(GAPI_CODEGEN, gapi-codegen, no)
+	if test "x$GAPI_CODEGEN" = "xno"; then
+        	AC_MSG_ERROR([You need to install gtk-sharp-gapi])
+	fi
+	
+	AC_PATH_PROG(GAPI_FIXUP, gapi-fixup, no)
+	if test "x$GAPI_FIXUP" = "xno"; then
+        	AC_MSG_ERROR([You need to install gtk-sharp-gapi])
+	fi
+	
+	API_VERSION=1.0.0.0
+	AC_SUBST(API_VERSION)
+fi
+
 dnl Extra libs
 EXTRA_LIBS="$ZLIB"
 if test "x$LIBSOCKET" != "x"; then
@@ -220,6 +269,7 @@
 AC_SUBST(GMIME_CFLAGS)
 AC_SUBST(HTML_DIR)
 
+
 AC_OUTPUT(
 Makefile
 docs/Makefile
@@ -229,6 +279,10 @@
 util/Makefile
 gmime/Makefile
 gmime/gmime.h
+mono/Makefile
+mono/AssemblyInfo.cs
+mono/gmime-sharp.dll.config
+mono/gmime-sharp.pc
 src/Makefile
 tests/Makefile
 gmime-config
@@ -246,4 +300,6 @@
 
   Profiling enabled:    ${enable_profile}
   Warnings enabled:     ${enable_warnings}
+
+  Mono bindings:        ${enable_mono}
 "
